<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Phaser - Making your first game, part 1</title>
    <script type="text/javascript" src="phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">
//Variable declarations
var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });
var starArray = new Array();
var stars;
var state = 
{
    x:0,
    y:0
}
var player;
var cursors;

//Preloads(Sprites)
function preload() {
    game.load.image('star', 'assets/hitman1_gun.png');
    // game.load.spritesheet('dude', 'assets/dude.png', 32, 48);
}
//Creating
function create() {
    //creating player
    state.x = Math.floor((Math.random() * 800) + 1);
    state.y = Math.floor((Math.random() * 600) + 1);

    console.log("Cords:"+ state.x + ","+ state.y);
    game.physics.startSystem(Phaser.Physics.ARCADE);
    player = game.add.sprite(state.x,state.y, 'star');
    player = game.physics.arcade.enable(player);
    game.physics.arcade.enable(player);
    stars = game.add.group();
    cursors = game.input.keyboard.createCursorKeys();


    //creating objects
    makeStar(0,0);
}

function update() {
    //makeStar(0,0);
    //player.body.velocity.x = 0;

    if (cursors.left.isDown)
    {
        //  Move to the left
        player.body.velocity.x = -150;

        player.animations.play('left');
    }
    else if (cursors.right.isDown)
    {
        //  Move to the right
        player.body.velocity.x = 150;

        player.animations.play('right');
    }else if (cursors.up.isDown)
    {
        player.body.velocity.y = -150;
    }else if (cursors.down.isDown)
    {
        player.body.velocity.y = 150;
    }
    else
    {
        //  Stand still
        player.animations.stop();

        player.frame = 4;
    }
 
}

function killAllS()
{
    //console.log(stars.length);
    for (i = 0; i < stars.length; i++) {
        var tempStar = stars.getFirstAlive();

        if(tempStar)
        {
            tempStar.kill();
        }
    }
    
}

function makeStar(xCord, yCord)
{
    stars.create(xCord,yCord, 'star');
}

</script>
<body>
</html>
